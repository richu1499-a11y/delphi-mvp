{% extends 'delphi/base.html' %}
{% load static %}

{% block title %}Welcome â€” PEP Delphi Consensus Study{% endblock %}

{% block content %}
<div class="row">
  <!-- Left Column: Login Form -->
  <div class="col-lg-5 mb-4">
    <div class="card h-100">
      <div class="card-header">
        <h5 class="mb-0"><i class="bi bi-box-arrow-in-right me-2"></i>Panelist Login</h5>
      </div>
      <div class="card-body">
        <p class="text-muted mb-4">Enter your access token or paste your login link to access the survey.</p>

        <form method="post">
          {% csrf_token %}
          <div class="mb-3">
            <label for="token" class="form-label fw-bold">Access Token</label>
            <input
              type="text"
              class="form-control form-control-lg"
              id="token"
              name="token"
              placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
              style="font-family: monospace; font-size: 0.85rem;"
              required
            >
            <div class="form-text">
              <i class="bi bi-info-circle me-1"></i>
              You can paste your full login link or just the token.
            </div>
          </div>
          <button type="submit" class="btn btn-primary btn-lg w-100">
            <i class="bi bi-arrow-right-circle me-2"></i>Access Survey
          </button>
        </form>

        <hr class="my-4">

        <div class="text-center">
          <p class="text-muted small mb-0">
            <i class="bi bi-envelope me-1"></i>
            Don't have a token? Contact the study administrator.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Right Column: About -->
  <div class="col-lg-7 mb-4">
    <div class="card h-100">
      <div class="card-body text-center py-4 py-lg-5">
        <div class="icon-circle icon-circle-primary mx-auto mb-3 mb-lg-4" style="width: 4rem; height: 4rem; font-size: 2rem;">
          <i class="bi bi-clipboard2-pulse"></i>
        </div>
        <h2 class="mb-3 fs-3 fs-lg-2">PEP Delphi Consensus Study</h2>
        <p class="lead text-muted mb-0" style="max-width: 500px; margin: 0 auto; font-size: 1rem;">
          Establishing expert consensus on standardizing post-ERCP pancreatitis definitions,
          outcome measures, and research priorities.
        </p>
      </div>
    </div>
  </div>
</div>

<!-- Features Row -->
<div class="row g-3 g-md-4 mb-4">
  <div class="col-12 col-md-4">
    <div class="card h-100">
      <div class="card-body text-center p-3 p-md-4">
        <div class="icon-circle icon-circle-primary mx-auto mb-3">
          <i class="bi bi-shield-lock"></i>
        </div>
        <h5 class="fw-bold fs-6">Secure & Confidential</h5>
        <p class="text-muted small mb-0">Your responses are anonymized and stored securely in compliance with research protocols.</p>
      </div>
    </div>
  </div>
  <div class="col-12 col-md-4">
    <div class="card h-100">
      <div class="card-body text-center p-3 p-md-4">
        <div class="icon-circle icon-circle-success mx-auto mb-3">
          <i class="bi bi-people"></i>
        </div>
        <h5 class="fw-bold fs-6">Expert Panel</h5>
        <p class="text-muted small mb-0">Join leading gastroenterologists and researchers in establishing evidence-based consensus.</p>
      </div>
    </div>
  </div>
  <div class="col-12 col-md-4">
    <div class="card h-100">
      <div class="card-body text-center p-3 p-md-4">
        <div class="icon-circle icon-circle-warning mx-auto mb-3">
          <i class="bi bi-graph-up-arrow"></i>
        </div>
        <h5 class="fw-bold fs-6">Real-Time Feedback</h5>
        <p class="text-muted small mb-0">View aggregated results and group consensus after completing each round.</p>
      </div>
    </div>
  </div>
</div>

<!-- About Section -->
<div class="card mb-4">
  <div class="card-header">
    <h5 class="mb-0 fs-6"><i class="bi bi-info-circle me-2"></i>About This Study</h5>
  </div>
  <div class="card-body">
    <p class="mb-3">
      Post-ERCP pancreatitis (PEP) remains one of the most common and serious complications of endoscopic retrograde cholangiopancreatography.
      Despite extensive research, there is significant heterogeneity in how PEP is defined, measured, and reported across clinical trials.
    </p>
    <p class="mb-0">
      This Delphi study brings together international experts to establish consensus on:
    </p>
    <ul class="mt-2 mb-0">
      <li>Standardized definitions for PEP and its severity grades</li>
      <li>Minimum criteria for high-quality PEP prophylaxis research</li>
      <li>Core outcome measures for future clinical trials</li>
      <li>Research priorities in the field</li>
    </ul>
  </div>
</div>

<!-- Study Team Section -->
<div class="card mb-4">
  <div class="card-header">
    <h5 class="mb-0 fs-6"><i class="bi bi-people-fill me-2"></i>Study Team</h5>
  </div>
  <div class="card-body">
    
    <!-- Principal Investigator -->
    <h6 class="text-primary fw-bold mb-3 border-bottom pb-2 fs-6">
      <i class="bi bi-star-fill me-2"></i>Principal Investigator
    </h6>
    <div class="row justify-content-center mb-4">
      <div class="col-10 col-sm-8 col-md-6 col-lg-4">
        <div class="text-center team-member">
          <img src="{% static 'images/akshintala-venkata-1528486594.png' %}" 
               alt="Dr. Venkata Akshintala" 
               class="rounded-circle mb-3 team-photo">
          <h6 class="fw-bold mb-1">Venkata S. Akshintala, MD, PhD</h6>
          <p class="text-muted small mb-1">Associate Professor</p>
          <p class="text-muted small mb-2">Division of Gastroenterology & Hepatology<br>Johns Hopkins University School of Medicine</p>
          <a href="mailto:vakshin1@jhmi.edu" class="btn btn-sm btn-outline-primary">
            <i class="bi bi-envelope me-1"></i><span class="d-none d-sm-inline">vakshin1@jhmi.edu</span><span class="d-sm-none">Email</span>
          </a>
        </div>
      </div>
    </div>

    <!-- Study Coordinator -->
    <h6 class="text-primary fw-bold mb-3 border-bottom pb-2 fs-6">
      <i class="bi bi-clipboard-check me-2"></i>Study Coordinator
    </h6>
    <div class="row justify-content-center mb-4">
      <div class="col-10 col-sm-8 col-md-6 col-lg-4">
        <div class="text-center team-member">
          <img src="{% static 'images/Richu Ravikumar Processed.jpg' %}" 
               alt="Richu Ravikumar" 
               class="rounded-circle mb-3 team-photo">
          <h6 class="fw-bold mb-1">Richu Ravikumar, MBBS</h6>
          <p class="text-muted small mb-1">Post-Doctoral Research Fellow</p>
          <p class="text-muted small mb-2">Division of Gastroenterology & Hepatology<br>Johns Hopkins University School of Medicine</p>
          <a href="mailto:richu1499@outlook.com" class="btn btn-sm btn-outline-primary">
            <i class="bi bi-envelope me-1"></i><span class="d-none d-sm-inline">richu1499@outlook.com</span><span class="d-sm-none">Email</span>
          </a>
        </div>
      </div>
    </div>

    <!-- Steering Committee -->
    <h6 class="text-primary fw-bold mb-3 border-bottom pb-2 fs-6">
      <i class="bi bi-diagram-3 me-2"></i>Steering Committee
    </h6>
    <div class="row justify-content-center">
      <div class="col-10 col-sm-6 col-md-5 col-lg-4 mb-4">
        <div class="text-center team-member">
          <img src="{% static 'images/Erwin-Van-Geenen.png' %}" 
               alt="Dr. Erwin Van Geenen" 
               class="rounded-circle mb-3 team-photo">
          <h6 class="fw-bold mb-1">Erwin Van Geenen, MD, PhD</h6>
          <p class="text-muted small mb-0">Department of Gastroenterology & Hepatology</p>
          <p class="text-muted small mb-0">Radboud University Medical Center</p>
          <p class="text-muted small mb-0">Nijmegen, Netherlands</p>
        </div>
      </div>
      <div class="col-10 col-sm-6 col-md-5 col-lg-4 mb-4">
        <div class="text-center team-member">
          <img src="{% static 'images/Christina-J-Sperna-Weiland (1).png' %}" 
               alt="Dr. Christina J. Sperna Weiland" 
               class="rounded-circle mb-3 team-photo">
          <h6 class="fw-bold mb-1">Christina J. Sperna Weiland, MD</h6>
          <p class="text-muted small mb-0">Department of Gastroenterology & Hepatology</p>
          <p class="text-muted small mb-0">Radboud University Medical Center</p>
          <p class="text-muted small mb-0">Nijmegen, Netherlands</p>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- Institutional Affiliations -->
<div class="card">
  <div class="card-header">
    <h5 class="mb-0 fs-6"><i class="bi bi-building me-2"></i>Institutional Affiliations</h5>
  </div>
  <div class="card-body py-4">
    <div class="row align-items-center justify-content-center text-center g-4">
      <div class="col-6 col-md-5 col-lg-4">
        <img src="{% static 'images/jhu_logo.jpg' %}" alt="Johns Hopkins University" class="img-fluid institution-logo mb-2">
        <p class="text-muted small mb-0">Johns Hopkins University<br>School of Medicine</p>
      </div>
      <div class="col-6 col-md-5 col-lg-4">
        <div class="radboud-logo mb-2">
          <span class="fw-bold">Radboud UMC</span>
        </div>
        <p class="text-muted small mb-0">Radboud University<br>Medical Center</p>
      </div>
    </div>
  </div>
</div>

<style>
  /* Team Photos - Responsive sizing */
  .team-photo {
    width: 120px;
    height: 120px;
    object-fit: cover;
    border: 3px solid #002D72;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease;
  }
  
  @media (min-width: 576px) {
    .team-photo {
      width: 140px;
      height: 140px;
      border-width: 4px;
    }
  }
  
  @media (min-width: 992px) {
    .team-photo {
      width: 150px;
      height: 150px;
    }
  }
  
  .team-photo:hover {
    transform: scale(1.05);
  }
  
  .team-member h6 {
    font-size: 0.95rem;
  }
  
  @media (max-width: 575px) {
    .team-member h6 {
      font-size: 0.9rem;
    }
    .team-member p {
      font-size: 0.75rem !important;
    }
  }
  
  /* Institution Logos */
  .institution-logo {
    max-height: 50px;
    width: auto;
  }
  
  @media (min-width: 768px) {
    .institution-logo {
      max-height: 60px;
    }
  }
  
  .radboud-logo {
    background: linear-gradient(135deg, #c8102e 0%, #e31837 100%);
    color: white;
    padding: 12px 20px;
    border-radius: 8px;
    display: inline-block;
    font-size: 1rem;
  }
  
  @media (min-width: 768px) {
    .radboud-logo {
      padding: 15px 25px;
      font-size: 1.1rem;
    }
  }
  
  /* Icon circles responsive */
  .icon-circle {
    width: 3rem;
    height: 3rem;
    font-size: 1.25rem;
  }
  
  @media (min-width: 768px) {
    .icon-circle {
      width: 3.5rem;
      height: 3.5rem;
      font-size: 1.5rem;
    }
  }
  
  /* Card responsiveness */
  .card-body {
    padding: 1rem;
  }
  
  @media (min-width: 768px) {
    .card-body {
      padding: 1.5rem;
    }
  }
  
  /* Token input responsive */
  @media (max-width: 575px) {
    #token {
      font-size: 0.75rem !important;
    }
    #token::placeholder {
      font-size: 0.7rem;
    }
  }
</style>
{% endblock %}